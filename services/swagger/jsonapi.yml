ResourceMeta:
  type: object
  description: >
    A JSON:API-formatted object detailing meta information.
  additionalProperties:
    oneOf:
      - type: string
      - type: number
      - type: boolean

ResourceLinks:
  type: object
  description: >
    A JSON:API-formatted object detailing further links. These links could be further API queries, or links to
    relevant external sites/pages that are relevant to the resource.
  additionalProperties:
    oneOf:
      - type: string
        format: uri
        example: https://testbank.dev/#link-to-somewhere
      - type: object
        properties:
          href:
            type: string
            format: uri
            example: https://testbank.dev/#link-to-somewhere
          title:
            type: string
          type:
            type: string
          meta: # Odd, $ref struggles here
            type: object
            description: >
              A JSON:API-formatted object detailing meta information.
            additionalProperties:
              oneOf:
                - type: string
                - type: number
                - type: boolean
        required:
          - href

ResourceError:
  type: object
  description: A JSON:API-formatted error object
  properties:
    title:
      type: string
      description: A short, human-readable summary of the problem.
    detail:
      type: string
      description: A human-readable explanation specific to this occurrence of the problem.
    status:
      type: string
      format: http-status-code
      description: The HTTP status code applicable to this problem, expressed as a string value.
    code:
      type: string
      description: An application-specific error code.
    links:
      $ref: '#/ResourceLinks'
    meta:
      $ref: '#/ResourceMeta'
    source:
      type: object
      description: An object containing references to the primary source of the error.
      properties:
        pointer:
          type: string
          description: A pointer/reference to the value in the request query/body that caused the error.
        parameter:
          type: string
          description: A string indicating which request  query parameter caused the error.
        header:
          type: string
          description: A string indicating which request header caused the error.
  required:
    - detail

PaginationQuery:
  in: query
  name: page
  description: Paginate through results from this endpoint by providing a page & limit.
  style: deepObject
  explode: true
  example: page[page]=1&page[limit]=100
  schema:
    type: object
    properties:
      page:
        type: integer
        default: 0
      limit:
        type: integer
        default: 100

PrimaryDataPaginationLinks:
  type: object
  description: >
    A JSON:API-formatted object detailing further links, including pagination.
  properties:
    prev:
      type: string
      format: uri
      description: >
        An absolute URL to the previous page of results, `null` if there is no previous page.
    next:
      type: string
      format: uri
      description: >
        An absolute URL to the next page of results, `null` if there is no next page.
    first:
      type: string
      format: uri
      description: An absolute URL to the first page of results, `null` if there is only 1 page.
    last:
      type: string
      format: uri
      description: >
        An absolute URL to the last page of results, `null` if there is only 1 page.
  additionalProperties:
    $ref: '#/ResourceLinks/additionalProperties'
  required:
    - prev
    - next
    - first
    - last
